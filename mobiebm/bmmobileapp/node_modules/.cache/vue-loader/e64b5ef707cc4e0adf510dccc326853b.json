{"remainingRequest":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\user.vue?vue&type=style&index=0&id=5f0516d1&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\user.vue","mtime":1562027147940},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n .container{\n    overflow: hidden;\n} \n.header{\n    width: 100%;\n    height:11em;\n}\n.headerimg{\n    position: relative;\n}\n.userimg{\n    background-color: rgba(0, 0, 0, 0.6);\n    position: fixed;\n    top: 6%;\n    left: 40%;\n    width:4em;\n    height:4em;\n    border-radius: 0.3em; \n}\n.btnbox{\n    width: 100%;\n    position: fixed;\n    display: flex;\n    top: 17.4%;\n    left: 0%;\n    justify-content: space-around;\n    align-items: center;\n}\n.btnbox>div{\n    width: 50%;\n    height: 3.0em;\n    line-height: 3.0em;\n    text-align: center;\n    font-size: 1.2em;\n    color: #fff;\n}\n/*注册表单部分*/\n.regbody>li,.formlist>li{\n    padding: 0.3em;\n    display: flex;\n    width: 100%;\n    height: 3em;\n    line-height: 3em;\n    border-bottom: 0.4px solid #999;\n}\n.regbody>li>input,.formlist>li>input{\n    width: 45%;\n    height: 2.8em;\n    outline: none;\n    margin-top: 0.2em;\n    overflow: hidden;\n}\n.regbody>li>span:first-child,.formlist>li>span:first-child{\n    width: 25%;\n    padding-right: 0.5em;\n    text-align: right;\n    color: #999;\n}\n.checknum{\n    color: indianred;\n    font-size: 0.8em;\n    padding-left: 0.5em;\n}\n.checkpic{\n    height: 100%;\n    text-align: center;\n    display: inline-block;\n    width: 20%;\n    background-image:url(../../../assets/image/common/yztu.jpg);\n    overflow: hidden; \n}\n.agreecheckbox{\n    width: 100%;\n    height: 4em;\n    line-height: 4em;\n    padding-left: 1em;\n}\n.regsub,.logsub{\n    width: 90%;\n    height: 3em;\n    line-height: 3em;\n    text-align: center;\n    border-radius: 0.5em;\n    background-color:#E63D59;\n    color: #fff;\n    margin: 0 auto;\n    display: inline-block;\n    outline: none;\n    border: none;\n}\n.subbox{\n    text-align: center;\n}\n/*登录表单部分*/ \n.forgetpwd{\n    width: 100%;\n    height: 4em;\n    line-height: 4em;\n    text-align: right;\n    padding-right:1em;\n    color: #999; \n}\n.usermsg{\n    font-size: 1.5em;\n}\n.usermsg>ul li{\n    text-align: center;\n    line-height: 1.5em;\n    margin-top: 0.5em;\n}\n",{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src\\components\\bamobile\\common","sourcesContent":["<template>\r\n    <div class=\"container\" @touchmove.prevent>\r\n        <!-- 页头 -->\r\n        <div class=\"header\" v-show=\"2!=num\">\r\n            <img class=\"headerimg\" src=\"../../../assets/image/common/loginuser.jpg\" width=\"100%\" alt=\"\">\r\n            <div class=\"userimg\">\r\n                <img src=\"../../../assets/image/common/user-pic.png\" width=\"100%\" alt=\"\">\r\n            </div>\r\n            <div class=\"btnbox\">\r\n                <div @click=\"selected(0)\">登 录<span></span></div>\r\n                <div @click=\"selected(1)\">注 册<span></span></div>\r\n            </div>\r\n        </div>\r\n        <!-- 注册表单 -->\r\n        <div id=\"form1\" v-show=\"1 == num\">\r\n            <ul class=\"regbody formlist\">\r\n                <li>\r\n                    <span>手机号码</span>\r\n                    <input type=\"text\" @blur=\"checkphone()\" v-model=\"regphone\" placeholder=\"输入手机号\" ref='regphone'>\r\n                </li>\r\n                <li>\r\n                    <span>图片验证</span>\r\n                    <input type=\"text\" placeholder=\"输入图片码\" @blur=check(0) v-model=\"regtpm\">\r\n                    <span class=\"checkpic\" @click=\"tupianma()\" ref='tupianma'>2214</span>\r\n                </li>\r\n                <li>\r\n                    <span>验证码</span>\r\n                    <input type=\"text\" placeholder=\"短信验证码\" v-model=\"regdxm\">\r\n                    <span class=\"checknum\">获取验证码</span>\r\n                </li>\r\n                <li>\r\n                    <span>密码</span>\r\n                    <input type=\"text\" v-model=\"regupwd\" placeholder=\"设置6位数字密码\" @blur=check(1) ref='regupwd1'>\r\n                </li>\r\n                <li>\r\n                    <span>确认密码</span>\r\n                    <input type=\"text\" placeholder=\"再次输入密码\" @blur=check(2)\r\n                    ref='regupwd2'>\r\n                </li>\r\n            </ul>\r\n            <div class=\"agreecheckbox\">\r\n                <input type=\"checkbox\" v-model=\"checked\"> 同意 商城用户注册协议\r\n            </div>\r\n            <div class=\"subbox\">\r\n                <button class=\"regsub\"  @click=\"regsubmit()\" :disabled=\"!checked\">注 册</button>\r\n            </div>\r\n        </div>\r\n        \r\n        <!-- 登录表单 -->\r\n        <div v-show=\"0 == num\">\r\n            <ul class=\"logbody formlist\">\r\n                <li>\r\n                    <span>用户名</span>\r\n                    <input type=\"text\" v-model=\"logphone\" placeholder=\"账号/手机号\">\r\n                </li>\r\n                <li>\r\n                    <span>密码</span>\r\n                    <input type=\"text\" v-model=\"logupwd\" placeholder=\"请输入密码\">\r\n                    <span><img src=\"#\" alt=\"\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"forgetpwd\">\r\n                忘记密码？\r\n            </div>\r\n            <div class=\"subbox\">\r\n                <button class=\"logsub\" @click=\"logsubmit()\" > 登录 </button>\r\n            </div>\r\n        </div>\r\n        <!-- 登录成功 -->\r\n        <div v-show=\"2 == num\">\r\n            <div class=\"usermsg\">\r\n            个人中心\r\n            <ul>\r\n                <li>欢迎13968853090用户{{uid}}号</li>\r\n                <li>物流信息</li>\r\n                <li>我的收藏</li>\r\n                <li>我的订单</li>\r\n                <li @click=\"logOut()\">退出登录</li>\r\n                <li>设置</li>\r\n            </ul>\r\n            </div>\r\n        </div>\r\n\r\n    </div>    \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            num:0,\r\n            regphone:\"\",\r\n            regupwd:\"\",\r\n            regtpm:\"\",\r\n            regdxm:\"\",\r\n            logphone:\"\",\r\n            logupwd:\"\",\r\n            checked:true,\r\n            uid:\"\",\r\n\r\n        }\r\n    },\r\n    created(){\r\n        this.islogin();\r\n    },\r\n    methods: {\r\n        selected(n) {//切换登录与注册 v-show\r\n            this.num = n;\r\n        },\r\n        checkphone(){//验证手机号是否重名\r\n            var phoneReg=new RegExp(\"^[0-9]{11}$\",\"ig\");\r\n            var phone=this.regphone;\r\n            if(phone !=\"\"){\r\n                if(!phoneReg.test(phone)){\r\n                    phoneReg.lastIndex = 0;//重置正则初始位置\r\n                    this.$toast(\"手机格式不正确\");\r\n                    this.regphone=\"\";\r\n                    this.$refs.regphone.focus();\r\n                    return;\r\n                }else{//验证格式正确发送验证是否重名\r\n                    var url1 = \"phone\";\r\n                    var obj = {phone:phone};\r\n                    //7:并且获取服务器返回结果\r\n                    this.axios.get(url1,{params:obj}).then(result=>{\r\n                        if(result.data.length>0){\r\n                            this.$toast(\"手机号已重复\");\r\n                            this.regphone=\"\";\r\n                            this.$refs.regphone.focus();\r\n                            return;\r\n                        }else{\r\n                            this.$toast(\"手机号可注册\");\r\n                            return;\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },//验证手机号是否重名\r\n        tupianma(){//点击切换图片验证码\r\n            this.$refs.tupianma.innerHTML=Math.floor(Math.random()*10000);   \r\n        },//点击切换图片验证码\r\n        check(n){//验证手机和密码格式及图片码\r\n            if(n==0){\r\n                if(this.regtpm!=\"\"){\r\n                    if(this.$refs.tupianma.innerHTML!=this.regtpm){\r\n                    this.$toast(\"图片码错误\");\r\n                    this.regtpm=\"\";\r\n                    return;\r\n                    }\r\n                } //图片码的验证  \r\n            }else if(n==1){\r\n                let upwdReg=new RegExp(\"^[0-9]{6}$\",\"ig\");\r\n                let upwd=this.regupwd;\r\n                if(upwd !=\"\"){\r\n                    if(!upwdReg.test(upwd)){\r\n                        upwdReg.lastIndex = 0;//重置正则初始位置\r\n                        this.$toast(\"密码格式不正确\");\r\n                        this.regupwd=\"\";\r\n                        this.$refs.regupwd1.focus();\r\n                        return;\r\n                    }\r\n                };    \r\n            }else if(n==2){\r\n                if(this.$refs.regupwd2.value!=\"\"){\r\n                    if(this.$refs.regupwd2.value!=this.regupwd){\r\n                        this.$toast(\"密码不一致\");\r\n                        this.$refs.regupwd2.value=\"\";\r\n                        this.$refs.regupwd2.focus();\r\n                    }\r\n                }\r\n            }\r\n        },//验证手机和密码格式及图片码\r\n        regsubmit(){//注册\r\n             if(this.regphone!=\"\"\r\n             &&this.regupwd!=\"\"\r\n             &&this.regtpm!=\"\"\r\n             &&this.regdxm!=\"\"\r\n             &&this.$refs.regupwd2.value!=\"\"){\r\n                var url = \"reg\";\r\n                var phone=this.regphone;\r\n                var upwd=this.regupwd;\r\n                var obj = {\r\n                    phone:phone,\r\n                    upawd:upwd\r\n                };\r\n                 //处理字符串\r\n                var qs=require(\"qs\")\r\n                obj=qs.stringify(obj)\r\n                this.axios.post(url,obj).then(result=>{\r\n                    console.log(result.data)\r\n                    if(result.data.data.affectedRows>0){\r\n                        this.$toast(`${result.data.msg},请登录`);\r\n                        this.num=0;        \r\n                        return;\r\n                    }\r\n                })\r\n            } else {\r\n                this.$toast(\"请输入完整信息\");\r\n            }\r\n        },//注册\r\n        logsubmit(){//登录\r\n            if(this.logphone!=\"\"\r\n             &&this.logupwd!=\"\"){\r\n                var url = \"log\";\r\n                var phone=this.logphone;\r\n                var upwd=this.logupwd;\r\n                var obj = {\r\n                    phone:phone,\r\n                    upawd:upwd\r\n                };\r\n                 //处理字符串\r\n                var qs=require(\"qs\")\r\n                obj=qs.stringify(obj)\r\n                this.axios.post(url,obj).then(result=>{\r\n                    //console.log(result.data[0].uid)\r\n                    if(result.data.length>0){\r\n                        this.$toast(`登录成功`); \r\n                        localStorage.setItem(\"uid\", `${result.data[0].uid}`);\r\n                        this.uid=localStorage.getItem(\"uid\");\r\n                        this.num=2;\r\n                        \r\n                    }else{\r\n                        this.$toast(`用户名或密码错误`);\r\n                    }\r\n                })\r\n            }else{\r\n                this.$toast(\"请输入完整信息\");\r\n            }\r\n        },//登录\r\n        islogin(){//是否登录\r\n            var uid=localStorage.getItem(\"uid\");\r\n            //console.log(uid);\r\n            if(!uid){\r\n                this.num=0;\r\n            }else{\r\n                this.num=2;\r\n            }\r\n        },\r\n        logOut(){//退出登录\r\n            localStorage.removeItem(\"uid\");\r\n            this.num=0;\r\n            this.logphone=\"\",\r\n            this.logupwd=\"\",\r\n            this.$router.push({path:'/bama'})\r\n            window.location.reload();\r\n        }\r\n\r\n\r\n    },\r\n    // watch:{\r\n    //     $route(to,from){\r\n    //   console.log(to) \r\n    //   this.active=to.query.key;}\r\n    // },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n .container{\r\n    overflow: hidden;\r\n} \r\n.header{\r\n    width: 100%;\r\n    height:11em;\r\n}\r\n.headerimg{\r\n    position: relative;\r\n}\r\n.userimg{\r\n    background-color: rgba(0, 0, 0, 0.6);\r\n    position: fixed;\r\n    top: 6%;\r\n    left: 40%;\r\n    width:4em;\r\n    height:4em;\r\n    border-radius: 0.3em; \r\n}\r\n.btnbox{\r\n    width: 100%;\r\n    position: fixed;\r\n    display: flex;\r\n    top: 17.4%;\r\n    left: 0%;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n.btnbox>div{\r\n    width: 50%;\r\n    height: 3.0em;\r\n    line-height: 3.0em;\r\n    text-align: center;\r\n    font-size: 1.2em;\r\n    color: #fff;\r\n}\r\n/*注册表单部分*/\r\n.regbody>li,.formlist>li{\r\n    padding: 0.3em;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 3em;\r\n    line-height: 3em;\r\n    border-bottom: 0.4px solid #999;\r\n}\r\n.regbody>li>input,.formlist>li>input{\r\n    width: 45%;\r\n    height: 2.8em;\r\n    outline: none;\r\n    margin-top: 0.2em;\r\n    overflow: hidden;\r\n}\r\n.regbody>li>span:first-child,.formlist>li>span:first-child{\r\n    width: 25%;\r\n    padding-right: 0.5em;\r\n    text-align: right;\r\n    color: #999;\r\n}\r\n.checknum{\r\n    color: indianred;\r\n    font-size: 0.8em;\r\n    padding-left: 0.5em;\r\n}\r\n.checkpic{\r\n    height: 100%;\r\n    text-align: center;\r\n    display: inline-block;\r\n    width: 20%;\r\n    background-image:url(../../../assets/image/common/yztu.jpg);\r\n    overflow: hidden; \r\n}\r\n.agreecheckbox{\r\n    width: 100%;\r\n    height: 4em;\r\n    line-height: 4em;\r\n    padding-left: 1em;\r\n}\r\n.regsub,.logsub{\r\n    width: 90%;\r\n    height: 3em;\r\n    line-height: 3em;\r\n    text-align: center;\r\n    border-radius: 0.5em;\r\n    background-color:#E63D59;\r\n    color: #fff;\r\n    margin: 0 auto;\r\n    display: inline-block;\r\n    outline: none;\r\n    border: none;\r\n}\r\n.subbox{\r\n    text-align: center;\r\n}\r\n/*登录表单部分*/ \r\n.forgetpwd{\r\n    width: 100%;\r\n    height: 4em;\r\n    line-height: 4em;\r\n    text-align: right;\r\n    padding-right:1em;\r\n    color: #999; \r\n}\r\n.usermsg{\r\n    font-size: 1.5em;\r\n}\r\n.usermsg>ul li{\r\n    text-align: center;\r\n    line-height: 1.5em;\r\n    margin-top: 0.5em;\r\n}\r\n</style>\r\n\r\n"]}]}