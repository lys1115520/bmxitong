{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\cart.vue?vue&type=style&index=0&id=6f4af3a6&scoped=true&lang=css","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\cart.vue","mtime":1561988383494},{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Administrator\\Desktop\\xianmu\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nbutton.active{\r\n    color: #999 !important;\r\n    \r\n}\r\n.page-tabbar{\r\n  overflow: hidden;/*溢出隐藏*/\r\n}\r\n.page-tabbar>.container{\r\n  font-size: 1.0em;\r\n  font-family:\"Microsoft YaHei\";\r\n}\r\n.container{\r\n  overflow:auto;/*溢出显示轮动条*/\r\n  padding-bottom: 5em;\r\n  \r\n}\r\n.headmodule{\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 2.9em; \r\n    border-bottom: 1px solid #ddd;\r\n    position: fixed;\r\n}\r\n.headmodule>div{\r\n    width:15%;\r\n    height: 2em;\r\n    line-height: 2em;\r\n    border: 1px solid red;\r\n    border-radius: 0.3em;\r\n    text-align: center;\r\n}\r\n/* 购物车主体 */\r\n.bodycontent{\r\n    margin-top:3em;\r\n}\r\n/* 全选框 和复选框的美化 */\r\nlabel input{\r\n    /* appearance: none; */  \r\n    -webkit-appearance: none;\r\n    outline: none;\r\n    display: none;\r\n}\r\nlabel input[type=\"checkbox\"]+span{\r\n    margin-right:0.5em;\r\n    width:1.4em;height:1.4em;\r\n    display:inline-block;\r\n    background:url('../../../assets/image/common/checkedfalse.png') no-repeat;\r\n    background-size:1.4em 1.4em;\r\n    background-position:0 0;}\r\nlabel input[type=\"checkbox\"]:checked+span{\r\n    background:url('../../../assets/image/common/checkedtrue.png') no-repeat;\r\n    background-size:1.4em 1.4em;\r\n    background-position:0 0;\r\n}\r\n.salemsgleft{\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 0.9em;\r\n}\r\n.salemsg,.salemsgright{\r\n    display: flex;\r\n    width: 100%;\r\n    height: 3em;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.salemsgleft,.salemsgright{\r\n    width: 50%;\r\n    height: 100%;\r\n    line-height:3em;\r\n}\r\n.salemsgright span:first-child{\r\n    color: #999;\r\n    font-size: 0.9em;\r\n}\r\n.salemsgright span:last-child{\r\n    color: #E63D59;\r\n    font-size: 0.93em;\r\n}\r\n/* 购物车商品列表 */\r\n.prolist{\r\n    border: 1px solid #ddd;\r\n    font-size: 1em;\r\n}\r\n.salemsgdiv,.prolistItem{\r\n    padding:0 1em;\r\n} \r\n.prolistItem{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.prolistImg{\r\n    width: 11em;\r\n    height: 5.9em;\r\n    border: 1px solid #ddd;\r\n    margin: 0.5em;\r\n    box-shadow: #999 0.09em 0.09em;\r\n}\r\n.checkbox{width: 2em;}\r\n.pricecount,.procount{\r\n    display:flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.pricecount span{\r\n    width: 1.5em;\r\n    text-align: center;\r\n}\r\n.protitle{\r\n    display: block;\r\n    width: 14em;\r\n    height: 3em;\r\n    line-height: 1.45em;\r\n    font-size: 0.9em;\r\n    color: black;\r\n    overflow: hidden;\r\n}\r\n.proprice{\r\n    color: #E63D59;\r\n}\r\n.propec{\r\n    color: #999;\r\n    font-size: 0.9em;\r\n    margin-top: 0.4em;\r\n}\r\n/* 底部全选结算栏 */\r\n.footmodule{\r\n    width: 100%;\r\n    position: fixed;\r\n    background-color: #fff;\r\n    bottom: 0;\r\n    z-index: 999;\r\n}\r\n.leftcheckall{\r\n    width: 75%;\r\n    height: 3.4em; \r\n    padding-left: 1em;\r\n    border: 1px solid #ddd;\r\n    background-color: #ddd;\r\n}\r\n.footmodule,.leftcheckall{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.leftcheckall .checkbox{\r\n    width: 25%;\r\n}\r\n.footp{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    text-align: right;\r\n    padding-right: 0.4em;\r\n    width: 75%;\r\n    height:3.5em;\r\n}\r\n.footp p:last-child{\r\n    font-size: 0.9em;\r\n    color: #999;\r\n}\r\n.rightbtn{\r\n    width: 25%;\r\n    height:3.5em;\r\n    line-height: 3.5em;\r\n    text-align: center;\r\n    \r\n}\r\n.rightbtn button{\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #E63D59;\r\n    color: #fff;\r\n    outline: none;\r\n    border: none;\r\n}\r\n.surpermask{\r\n    position: fixed;\r\n    z-index: 1000;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 2.8rem;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, .5);\r\n}\r\n.surpermask>ul{\r\n    width: 30%;\r\n    position: absolute;\r\n    right: 1em;\r\n    top: 1em;\r\n    background-color: aliceblue;\r\n    border-radius: 0.5em;\r\n    text-align: center;\r\n}\r\n.surpermask>ul li{\r\n    width: 100%;\r\n    height: 2.8em;\r\n    line-height: 2.8em;\r\n    border-bottom: 1px solid #999;\r\n}\r\n.surpermask>ul li:last-child{\r\n    border: none;\r\n}\r\n.nopro{\r\n    margin-top: 2em;\r\n    text-align: center;\r\n}\r\n.nopro .homeicon{\r\n    color: #E63D59;\r\n}\r\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+UA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src\\components\\bamobile\\common","sourcesContent":["<template>\r\n    <div class=\"page-tabbar\">\r\n        <div class=\"container\">\r\n            <!-- 遮罩弹出层 -->\r\n            <div v-show=\"boolen\" class=\"surpermask\">\r\n                <ul>\r\n                    <li>\r\n                        <router-link :to=\"'/bama?key=index'\">\r\n                            <span class=\"iconfont icon-home\" ></span>首页\r\n                        </router-link>\r\n                    </li>\r\n                    <li>\r\n                        <router-link :to=\"'/bama?key=user'\">\r\n                            <span class=\"iconfont icon-user\" ></span>我的\r\n                        </router-link>\r\n                    </li>\r\n                    <li>\r\n                        <router-link :to=\"'/bama?key=prolist'\">\r\n                            <span class=\"iconfont icon-search\" ></span>搜索\r\n                        </router-link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <!-- 头部登录提示框 -->\r\n            <div class=\"headmodule\">\r\n                <div @click=\"Touser()\" v-show=\"!islogin\">\r\n                  <a href=\"javascript:;\">登录</a>\r\n                </div>\r\n                <div v-show=\"islogin\">\r\n                  <a href=\"javascript:;\">欢迎</a>\r\n                </div>\r\n                <p v-show=\"!islogin\">登录后可同步购物车里的商品</p>\r\n                <p v-show=\"islogin\">欢迎来到购物车</p>\r\n                <span @click=\"del=!del\" v-show=\"!del\">编辑</span>\r\n                <span @click=\"del=!del\" v-show=\"del\">完成</span>\r\n                <span class=\"iconfont icon-viewgallery\" @click=\"backhome\"></span>\r\n            </div>\r\n            <!-- 购物车列表 -->\r\n            <div class=\"bodycontent\">\r\n                <div class=\"salemsgdiv\">\r\n                    <div class=\"salemsg\">\r\n                        <label class=\"salemsgleft\">\r\n                            <input type=\"checkbox\" v-model=\"checked\" @click=\"check_all()\">\r\n                            <span></span>\r\n                            <span>平台自营</span>\r\n                        </label>\r\n                        <div class=\"salemsgright\">\r\n                            <span>全场包邮</span>\r\n                            <span>领取优惠劵</span>\r\n                        </div>\r\n                    </div>\r\n                </div>               \r\n                <!-- 购物车商品列表 -->\r\n                <ul class=\"prolist\">\r\n                    <li class=\"prolistItem\" v-for=\"(item,index) in prolist\" :key=\"index\">\r\n                        <label class=\"salemsgleft checkbox\">\r\n                            <input type=\"checkbox\" v-model=\"selected\"\r\n                            :value=\"item\">\r\n                            <span></span>\r\n                        </label>\r\n                        <div class=\"prolistImg\"><img :src=\"'http://127.0.0.1:3000/'+item.pic\" width=\"100%\" alt=\"\"></div>\r\n                        <div class=\"promsg\">\r\n                            <a href=\"#\" class=\"protitle\">{{item.titles}}</a>\r\n                            <p class=\"propec\"> 规格 ：<span>主商品</span></p>\r\n                            <div class=\"pricecount\">\r\n                                <span class=\"proprice\">￥{{item.price.toFixed(2)}}</span>\r\n                                <div class=\"procount\" v-show=\"!del\">\r\n                                    <a href=\"javascript:;\" @click=\"item.lcount>1?item.lcount--:''\"><i class=\"iconfont icon-minus-square\"></i></a>\r\n                                    <span>{{item.lcount}}</span>\r\n                                    <a href=\"javascript:;\" @click=\"item.lcount<99?item.lcount++:''\"><i class=\"iconfont icon-plus-square\"></i></a>\r\n                                </div>\r\n                                <div v-show=\"del\" style=\"color:red;height:1.5em\">\r\n                                    <span @click=\"delpro\" :data-index=\"index\" :data-lid=\"item.lid\">删除</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </li>\r\n                    <!-- <li class=\"prolistItem\">\r\n                        <label class=\"salemsgleft checkbox\"><input type=\"checkbox\" checked><span></span></label>\r\n                        <div class=\"prolistImg\"><img src=\"../../../assets/image/common/checkedfalse.png\" width=\"100%\" alt=\"\"></div>\r\n                        <div class=\"promsg\">\r\n                            <a href=\"#\" class=\"protitle\">八马茶叶 金骏眉茶叶 武夷山桐木关金骏眉红茶礼盒装148克</a>\r\n                            <p class=\"propec\"> 规格 ：<span>主商品</span></p>\r\n                            <div class=\"pricecount\">\r\n                                <span class=\"proprice\">￥33.0</span>\r\n                                <div class=\"procount\">\r\n                                    <a href=\"#\"><i class=\"iconfont icon-minus-square\"></i></a>\r\n                                    <input type=\"text\" value=\"1\">\r\n                                    <a href=\"#\"><i class=\"iconfont icon-plus-square\"></i></a>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </li>  -->\r\n                    \r\n                </ul>\r\n                <div v-show=\"ishavelist\" class=\"nopro\">\r\n                    没有商品去\r\n                    <router-link :to=\"'/bama?key=index'\" class=\"homeicon\">\r\n                        <span class=\"iconfont icon-home\" ></span>首页\r\n                    </router-link>\r\n                    看看\r\n                </div>\r\n            </div>\r\n            <!-- 底部全选结算栏  -->\r\n            <div class=\"footmodule\">\r\n                <div class=\"leftcheckall\">\r\n                    <label class=\"salemsgleft checkbox\">\r\n                        <input type=\"checkbox\" v-model=\"checked\" @click=\"check_all()\">\r\n                        <span></span>\r\n                        <b>全选</b>\r\n                    </label>\r\n                    <div class=\"footp\">\r\n                        <p>合计 : <span>￥{{getTotal.totalPrice}}.00</span></p>\r\n                        <p>(不含运费，已优惠<span>￥0.00</span>)</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"rightbtn\" >\r\n                    <button :class={active:del} @click=\"!del && submit()\">\r\n                        结算( <span>{{getTotal.totalNum}}</span> )\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div> \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    created(){\r\n        this.login();//是否登录\r\n        this.loadcart();//加载购物车\r\n\r\n            \r\n    },\r\n    destroyed(){\r\n        document.body.style.position = 'relative';\r\n        document.body.style.overflow = 'auto';\r\n    },\r\n    data() {\r\n        return {\r\n            boolen:false,\r\n            islogin:false,\r\n            prolist:[],\r\n            ishavelist:false,\r\n            lcount:1,\r\n            selected:[],\r\n            checked:false,\r\n            del:false,\r\n            \r\n        }\r\n    },\r\n    mounted(){\r\n       \r\n    },\r\n    updated(){\r\n        console.log(this.selected)\r\n        if((this.selected.length==this.prolist.length)&&this.selected.length>0){//复选框全选中 则全选框选中\r\n                 this.checked=true;\r\n             }else{\r\n                 this.checked=false;\r\n             }\r\n    },\r\n    watch:{\r\n        $route(to,from){//监听地址栏变化 关闭模态框\r\n            this.boolen=false;\r\n            document.body.style.position = 'relative';\r\n            document.body.style.overflow = 'auto';\r\n        }  \r\n    },\r\n    methods:{\r\n        backhome(){//弹层出现禁止body滚动条\r\n            if(this.boolen==true){\r\n                this.boolen=false;\r\n                document.body.style.position = 'relative';\r\n                document.body.style.overflow = 'auto';\r\n            }else{\r\n                this.boolen=true;\r\n                document.body.style.position = 'fixed';\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        },\r\n        login(){//是否登录\r\n            var uid=localStorage.getItem(\"uid\");\r\n            //console.log(uid);\r\n            if(!uid){\r\n                this.islogin=false;\r\n                console.log(\"未登录\")\r\n            }else{\r\n                this.islogin=true;\r\n                console.log(\"已登录\")\r\n            }\r\n        },\r\n        loadcart(){//加载商品\r\n            var uid=localStorage.getItem(\"uid\");\r\n            let cartInfo=localStorage.cartInfo?JSON.parse(localStorage.cartInfo):[];\r\n            if(!uid){//未登录加载缓存\r\n                this.islogin=false;\r\n                if(cartInfo.length!=0){\r\n                    this.prolist=cartInfo;\r\n                }else{\r\n                    this.ishavelist=true;\r\n                }\r\n            }else{//已登录发送ajax请求\r\n                this.islogin=true;\r\n                var url=\"cart\";\r\n                var obj={uid:uid};\r\n                this.axios.get(url,{params:obj}).then(result=>{\r\n                    var appcartInfo=result.data;\r\n                    var Arry=appcartInfo.concat(cartInfo);\r\n                    //console.log(Arry);合并的购物车\r\n                    function selectsigle(array){     // 对象去重方法\r\n                        var allArr = [];    //建立新的临时数组\r\n                        for(var i=0;i<array.length;i++){\r\n                            var flag = true;\r\n                        　    for(var j=0;j<allArr.length;j++){\r\n                                if(array[i].lid == allArr[j].lid){\r\n                        　　　　　   flag = false;\r\n                            　　    };\r\n                            };\r\n                            if(flag){\r\n                            　　allArr.push(array[i]);\r\n                            };\r\n                        };\r\n                        return allArr;\r\n                    }　      　\r\n                    var allcartInfo=selectsigle(Arry);//去重后的数组\r\n                    //console.log(allcartInfo);\r\n                    if(allcartInfo.length!=0){\r\n                        this.prolist=allcartInfo;\r\n\r\n                        localStorage.cartInfo=[];//清空缓存的数据\r\n                    }else{\r\n                        this.ishavelist=true;\r\n                    }      \r\n                });\r\n            }\r\n        },\r\n        Touser(){//跳转登录页面\r\n            this.$router.push({path:'/bama?key=user'})\r\n        },\r\n        check_all(){//全选按钮功能 \r\n            if(this.checked==false){\r\n                this.selected = [];//先清空防止重复 再全添加\r\n                this.prolist.forEach(a => {\r\n                    this.selected.push(a)\r\n                })\r\n            } else{\r\n                this.selected = []\r\n            }\r\n        },\r\n        submit(){//结算提交判断是否登录 没有登录则跳转登录页 否则跳转订单页\r\n            console.log(\"tijiao \")\r\n            var uid=localStorage.getItem(\"uid\");\r\n            if(!uid){\r\n                 this.$toast(`请先登录`)\r\n                //如果没有登录跳转登录  \r\n                setTimeout(function(){\r\n                   \r\n                    this.$router.push({path:'/bama?key=user'})\r\n                    //console.log(this.$router)    \r\n                }.bind(this),3000)\r\n                \r\n            }else if(this.selected.length>0){//将其插入缓存并跳转\r\n                //let selectedInfo=[];\r\n                localStorage.selectedInfo=[];//清空缓存的数据\r\n                localStorage.selectedInfo=JSON.stringify(this.selected);\r\n                this.$router.push({path:'/order'})\r\n            }\r\n        },\r\n\r\n        delpro(e){//删除商品\r\n            var lid = e.target.dataset.lid;//获取当前点击对象的自定义属性\r\n            var index = e.target.dataset.index;\r\n            var uid=localStorage.getItem(\"uid\");\r\n            //删除之前判断是否删除\r\n            this.$messagebox({\r\n               title:\"消息\",\r\n               message:\"是否删除商品\",\r\n               showConfirmButton:true,\r\n               showCancelButton:true,\r\n            }).then(result=>{\r\n                if(\"cancel\"==result){\r\n                    return\r\n                }else{\r\n                    if(!uid){//没登录删除缓存数据\r\n                        this.prolist.splice(index,1);\r\n                        var cartInfo=JSON.parse(localStorage.cartInfo);\r\n                        var newcartInfo=[];\r\n                        for(var i=0;i<cartInfo.length;i++){\r\n                            if(cartInfo[i].lid!=lid){\r\n                                newcartInfo.push(cartInfo[i]);\r\n                            }\r\n                        };\r\n                        localStorage.cartInfo=JSON.stringify(newcartInfo);//更新本地缓存\r\n                        //location.reload();\r\n                        this.loadcart();\r\n                        if(this.selected.length==0){\r\n                            this.del=false\r\n                        }\r\n                    }else{//已登录删除服务器数据\r\n                        //发送ajax删除商品\r\n                        var url = \"del\"\r\n                        var obj = {lid:lid}\r\n                        this.axios.get(url,{params:obj}).then(result=>{\r\n                        //console.log(result)\r\n                        //刷新\r\n                        this.loadcart();\r\n                        if(this.selected.length==0){\r\n                            this.del=false\r\n                        }\r\n                        });\r\n                    }\r\n                }\r\n            });  \r\n        },\r\n\r\n    },\r\n    computed:{//计算属性\r\n        getTotal:function(){//计算总计\r\n             \r\n            var totalPri = 0;//已选中列表的数量乘以价格 相加的和\r\n            for (var i = 0,len = this.selected.length; i < len; i++) {\r\n                totalPri+=Number(this.selected[i].price)*Number(this.selected[i].lcount);\r\n            }\r\n            return {totalNum:this.selected.length,totalPrice:totalPri}\r\n\t\t},\r\n\r\n    }\r\n\r\n} \r\n</script>\r\n\r\n<style scoped>\r\nbutton.active{\r\n    color: #999 !important;\r\n    \r\n}\r\n.page-tabbar{\r\n  overflow: hidden;/*溢出隐藏*/\r\n}\r\n.page-tabbar>.container{\r\n  font-size: 1.0em;\r\n  font-family:\"Microsoft YaHei\";\r\n}\r\n.container{\r\n  overflow:auto;/*溢出显示轮动条*/\r\n  padding-bottom: 5em;\r\n  \r\n}\r\n.headmodule{\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 2.9em; \r\n    border-bottom: 1px solid #ddd;\r\n    position: fixed;\r\n}\r\n.headmodule>div{\r\n    width:15%;\r\n    height: 2em;\r\n    line-height: 2em;\r\n    border: 1px solid red;\r\n    border-radius: 0.3em;\r\n    text-align: center;\r\n}\r\n/* 购物车主体 */\r\n.bodycontent{\r\n    margin-top:3em;\r\n}\r\n/* 全选框 和复选框的美化 */\r\nlabel input{\r\n    /* appearance: none; */  \r\n    -webkit-appearance: none;\r\n    outline: none;\r\n    display: none;\r\n}\r\nlabel input[type=\"checkbox\"]+span{\r\n    margin-right:0.5em;\r\n    width:1.4em;height:1.4em;\r\n    display:inline-block;\r\n    background:url('../../../assets/image/common/checkedfalse.png') no-repeat;\r\n    background-size:1.4em 1.4em;\r\n    background-position:0 0;}\r\nlabel input[type=\"checkbox\"]:checked+span{\r\n    background:url('../../../assets/image/common/checkedtrue.png') no-repeat;\r\n    background-size:1.4em 1.4em;\r\n    background-position:0 0;\r\n}\r\n.salemsgleft{\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 0.9em;\r\n}\r\n.salemsg,.salemsgright{\r\n    display: flex;\r\n    width: 100%;\r\n    height: 3em;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.salemsgleft,.salemsgright{\r\n    width: 50%;\r\n    height: 100%;\r\n    line-height:3em;\r\n}\r\n.salemsgright span:first-child{\r\n    color: #999;\r\n    font-size: 0.9em;\r\n}\r\n.salemsgright span:last-child{\r\n    color: #E63D59;\r\n    font-size: 0.93em;\r\n}\r\n/* 购物车商品列表 */\r\n.prolist{\r\n    border: 1px solid #ddd;\r\n    font-size: 1em;\r\n}\r\n.salemsgdiv,.prolistItem{\r\n    padding:0 1em;\r\n} \r\n.prolistItem{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.prolistImg{\r\n    width: 11em;\r\n    height: 5.9em;\r\n    border: 1px solid #ddd;\r\n    margin: 0.5em;\r\n    box-shadow: #999 0.09em 0.09em;\r\n}\r\n.checkbox{width: 2em;}\r\n.pricecount,.procount{\r\n    display:flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.pricecount span{\r\n    width: 1.5em;\r\n    text-align: center;\r\n}\r\n.protitle{\r\n    display: block;\r\n    width: 14em;\r\n    height: 3em;\r\n    line-height: 1.45em;\r\n    font-size: 0.9em;\r\n    color: black;\r\n    overflow: hidden;\r\n}\r\n.proprice{\r\n    color: #E63D59;\r\n}\r\n.propec{\r\n    color: #999;\r\n    font-size: 0.9em;\r\n    margin-top: 0.4em;\r\n}\r\n/* 底部全选结算栏 */\r\n.footmodule{\r\n    width: 100%;\r\n    position: fixed;\r\n    background-color: #fff;\r\n    bottom: 0;\r\n    z-index: 999;\r\n}\r\n.leftcheckall{\r\n    width: 75%;\r\n    height: 3.4em; \r\n    padding-left: 1em;\r\n    border: 1px solid #ddd;\r\n    background-color: #ddd;\r\n}\r\n.footmodule,.leftcheckall{\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.leftcheckall .checkbox{\r\n    width: 25%;\r\n}\r\n.footp{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    text-align: right;\r\n    padding-right: 0.4em;\r\n    width: 75%;\r\n    height:3.5em;\r\n}\r\n.footp p:last-child{\r\n    font-size: 0.9em;\r\n    color: #999;\r\n}\r\n.rightbtn{\r\n    width: 25%;\r\n    height:3.5em;\r\n    line-height: 3.5em;\r\n    text-align: center;\r\n    \r\n}\r\n.rightbtn button{\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #E63D59;\r\n    color: #fff;\r\n    outline: none;\r\n    border: none;\r\n}\r\n.surpermask{\r\n    position: fixed;\r\n    z-index: 1000;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 2.8rem;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, .5);\r\n}\r\n.surpermask>ul{\r\n    width: 30%;\r\n    position: absolute;\r\n    right: 1em;\r\n    top: 1em;\r\n    background-color: aliceblue;\r\n    border-radius: 0.5em;\r\n    text-align: center;\r\n}\r\n.surpermask>ul li{\r\n    width: 100%;\r\n    height: 2.8em;\r\n    line-height: 2.8em;\r\n    border-bottom: 1px solid #999;\r\n}\r\n.surpermask>ul li:last-child{\r\n    border: none;\r\n}\r\n.nopro{\r\n    margin-top: 2em;\r\n    text-align: center;\r\n}\r\n.nopro .homeicon{\r\n    color: #E63D59;\r\n}\r\n</style>\r\n"]}]}