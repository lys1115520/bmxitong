{"remainingRequest":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\user.vue?vue&type=template&id=5f0516d1","dependencies":[{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\src\\components\\bamobile\\common\\user.vue","mtime":1561429847390},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1526010762000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\projects\\mobiebm\\bmmobileapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n    <div class=\"container\">\n        <!-- 页头 -->\n        <div class=\"header\">\n            <img class=\"headerimg\" src=\"../../../assets/image/common/loginuser.jpg\" width=\"100%\" alt=\"\">\n            <div class=\"userimg\">\n                <img src=\"../../../assets/image/common/user-pic.png\" width=\"100%\" alt=\"\">\n            </div>\n            <div class=\"btnbox\">\n                <div @click=\"selected(0)\">登 录<span></span></div>\n                <div @click=\"selected(1)\">注 册<span></span></div>\n            </div>\n        </div>\n        <!-- 注册表单 -->\n        <div id=\"form1\" v-show=\"1 == num\">\n            <ul class=\"regbody formlist\">\n                <li>\n                    <span>手机号码</span>\n                    <input type=\"text\" @blur=\"checkphone()\" v-model=\"regphone\" placeholder=\"输入手机号\" ref='regphone'>\n                </li>\n                <li>\n                    <span>图片验证</span>\n                    <input type=\"text\" placeholder=\"输入图片码\" @blur=check(0) v-model=\"regtpm\">\n                    <span class=\"checkpic\" @click=\"tupianma()\" ref='tupianma'>2214</span>\n                </li>\n                <li>\n                    <span>验证码</span>\n                    <input type=\"text\" placeholder=\"短信验证码\" v-model=\"regdxm\">\n                    <span class=\"checknum\">获取验证码</span>\n                </li>\n                <li>\n                    <span>密码</span>\n                    <input type=\"text\" v-model=\"regupwd\" placeholder=\"设置6位数字密码\" @blur=check(1) ref='regupwd1'>\n                </li>\n                <li>\n                    <span>确认密码</span>\n                    <input type=\"text\" placeholder=\"再次输入密码\" @blur=check(2)\n                    ref='regupwd2'>\n                </li>\n            </ul>\n            <div class=\"agreecheckbox\">\n                <input type=\"checkbox\" v-model=\"checked\"> 同意 商城用户注册协议\n            </div>\n            <div class=\"subbox\">\n                <button class=\"regsub\"  @click=\"regsubmit()\" :disabled=\"!checked\">注 册</button>\n            </div>\n        </div>\n        \n        <!-- 登录表单 -->\n        <div v-show=\"0 == num\">\n            <ul class=\"logbody formlist\">\n                <li>\n                    <span>用户名</span>\n                    <input type=\"text\" v-model=\"logphone\" placeholder=\"账号/手机号\">\n                </li>\n                <li>\n                    <span>密码</span>\n                    <input type=\"text\" v-model=\"logupwd\" placeholder=\"请输入密码\">\n                    <span><img src=\"#\" alt=\"\"></span>\n                </li>\n            </ul>\n            <div class=\"forgetpwd\">\n                忘记密码？\n            </div>\n            <div class=\"subbox\">\n                <button class=\"logsub\" @click=\"logsubmit()>登录</button>\n            </div>\n        </div>\n    </div>    \n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            num:0,\n            regphone:\"\",\n            regupwd:\"\",\n            regtpm:\"\",\n            regdxm:\"\",\n            logphone:\"\",\n            logupwd:\"\",\n            checked:true,\n\n        }\n    },\n    methods: {\n        selected(n) {//切换登录与注册 v-show\n            this.num = n;\n        },\n        checkphone(){//验证手机号是否重名\n            var phoneReg=new RegExp(\"^[0-9]{11}$\",\"ig\");\n            var phone=this.regphone;\n            if(phone !=\"\"){\n                if(!phoneReg.test(phone)){\n                    phoneReg.lastIndex = 0;//重置正则初始位置\n                    this.$toast(\"手机格式不正确\");\n                    this.regphone=\"\";\n                    this.$refs.regphone.focus();\n                    return;\n                }else{//验证格式正确发送验证是否重名\n                    var url1 = \"phone\";\n                    var obj = {phone:phone};\n                    //7:并且获取服务器返回结果\n                    this.axios.get(url1,{params:obj}).then(result=>{\n                        if(result.data.length>0){\n                            this.$toast(\"手机号已重复\");\n                            this.regphone=\"\";\n                            this.$refs.regphone.focus();\n                            return;\n                        }else{\n                            this.$toast(\"手机号可注册\");\n                            return;\n                        }\n                    })\n                }\n            }\n        },//验证手机号是否重名\n        tupianma(){//点击切换图片验证码\n            this.$refs.tupianma.innerHTML=Math.floor(Math.random()*10000);   \n        },//点击切换图片验证码\n        check(n){//验证手机和密码格式及图片码\n            if(n==0){\n                if(this.regtpm!=\"\"){\n                    if(this.$refs.tupianma.innerHTML!=this.regtpm){\n                    this.$toast(\"图片码错误\");\n                    this.regtpm=\"\";\n                    return;\n                    }\n                } //图片码的验证  \n            }else if(n==1){\n                let upwdReg=new RegExp(\"^[0-9]{6}$\",\"ig\");\n                let upwd=this.regupwd;\n                if(upwd !=\"\"){\n                    if(!upwdReg.test(upwd)){\n                        upwdReg.lastIndex = 0;//重置正则初始位置\n                        this.$toast(\"密码格式不正确\");\n                        this.regupwd=\"\";\n                        this.$refs.regupwd1.focus();\n                        return;\n                    }\n                };    \n            }else if(n==2){\n                if(this.$refs.regupwd2.value!=\"\"){\n                    if(this.$refs.regupwd2.value!=this.regupwd){\n                        this.$toast(\"密码不一致\");\n                        this.$refs.regupwd2.value=\"\";\n                        this.$refs.regupwd2.focus();\n                    }\n                }\n            }\n        },//验证手机和密码格式及图片码\n        regsubmit(){//注册\n             if(this.regphone!=\"\"\n             &&this.regupwd!=\"\"\n             &&this.regtpm!=\"\"\n             &&this.regdxm!=\"\"\n             &&this.$refs.regupwd2.value!=\"\"){\n                var url = \"reg\";\n                var phone=this.regphone;\n                var upwd=this.regupwd;\n                var obj = {\n                    phone:phone,\n                    upawd:upwd\n                };\n                 //处理字符串\n                var qs=require(\"qs\")\n                obj=qs.stringify(obj)\n                this.axios.post(url,obj).then(result=>{\n                    console.log(result.data)\n                    if(result.data.data.affectedRows>0){\n                        this.$toast(`${result.data.msg},请登录`);\n                        this.num=0;        \n                        return;\n                    }\n                })\n            } else {\n                this.$toast(\"请输入完整信息\");\n            }\n        },//注册\n        logsubmit(){//登录\n            if(this.logphone!=\"\"\n             &&this.logupwd!=\"\"){\n                var url = \"log\";\n                var phone=this.logphone;\n                var upwd=this.logupwd;\n                var obj = {\n                    phone:phone,\n                    upawd:upwd\n                };\n                 //处理字符串\n                var qs=require(\"qs\")\n                obj=qs.stringify(obj)\n                this.axios.post(url,obj).then(result=>{\n                    //console.log(result.data)\n                    if(result.data.data.affectedRows>0){\n                        this.$toast(`${result.data.msg},请登录`);\n                        this.num=0;        \n                        return;\n                    }\n                })\n            }else{\n                this.$toast(\"请输入完整信息\");\n            }\n        }\n\n\n    },\n}\n</script>\n\n<style scoped>\n/* .container{\n    overflow: auto;\n} */\n.header{\n    width: 100%;\n    height:11em;\n}\n.headerimg{\n    position: relative;\n}\n.userimg{\n    background-color: rgba(0, 0, 0, 0.6);\n    position: fixed;\n    top: 6%;\n    left: 40%;\n    width:4em;\n    height:4em;\n    border-radius: 0.3em; \n}\n.btnbox{\n    width: 100%;\n    position: fixed;\n    display: flex;\n    top: 17.4%;\n    left: 0%;\n    justify-content: space-around;\n    align-items: center;\n}\n.btnbox>div{\n    width: 50%;\n    height: 3.0em;\n    line-height: 3.0em;\n    text-align: center;\n    font-size: 1.2em;\n    color: #fff;\n}\n/*注册表单部分*/\n.regbody>li,.formlist>li{\n    padding: 0.3em;\n    display: flex;\n    width: 100%;\n    height: 3em;\n    line-height: 3em;\n    border-bottom: 0.4px solid #999;\n}\n.regbody>li>input,.formlist>li>input{\n    width: 45%;\n    height: 2.8em;\n    outline: none;\n    margin-top: 0.2em;\n    overflow: hidden;\n}\n.regbody>li>span:first-child,.formlist>li>span:first-child{\n    width: 25%;\n    padding-right: 0.5em;\n    text-align: right;\n    color: #999;\n}\n.checknum{\n    color: indianred;\n    font-size: 0.8em;\n    padding-left: 0.5em;\n}\n.checkpic{\n    height: 100%;\n    text-align: center;\n    display: inline-block;\n    width: 20%;\n    background-image:url(../../../assets/image/common/yztu.jpg);\n    overflow: hidden; \n}\n.agreecheckbox{\n    width: 100%;\n    height: 4em;\n    line-height: 4em;\n    padding-left: 1em;\n}\n.regsub,.logsub{\n    width: 90%;\n    height: 3em;\n    line-height: 3em;\n    text-align: center;\n    border-radius: 0.5em;\n    background-color:#E63D59;\n    color: #fff;\n    margin: 0 auto;\n    display: inline-block;\n    outline: none;\n    border: none;\n}\n.subbox{\n    text-align: center;\n}\n/*登录表单部分*/ \n.forgetpwd{\n    width: 100%;\n    height: 4em;\n    line-height: 4em;\n    text-align: right;\n    padding-right:1em;\n    color: #999; \n}\n</style>",null]}